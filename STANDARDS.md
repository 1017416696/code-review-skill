# 代码审查标准

## 通用规则

### 🔴 必须修复

#### 未处理的异常
- 捕获异常后不能忽略（空 catch 块）
- 必须有适当的错误处理或日志记录

#### 安全问题
- 不能硬编码密码、密钥、token
- 不能有 SQL 注入风险（字符串拼接构建查询）
- 敏感信息不能写入日志

### ⚠️ 建议改进

#### 魔法数字
- 避免直接使用数字字面量
- 应定义为有意义的常量
```
❌ if (count > 100)
✅ if (count > MAX_ADDRESS_COUNT)
```

#### 调试日志
- 删除不再需要的调试语句
- `console.log`、`System.out.println`、`print()` 等调试输出应移除

#### DRY 原则
- 相同或相似的代码块应提取为公共方法
- 重复逻辑超过 3 次必须重构

#### 过长的函数
- 单个函数/方法不宜超过 50 行
- 职责过多应拆分为多个小函数

#### 命名不规范
- 变量/函数名应清晰表达用途
- 避免单字母命名（循环变量除外）
- 避免拼音命名，使用英文

#### 注释问题
- 复杂逻辑应有注释说明
- 过时的注释应更新或删除
- 注释应解释"为什么"而非"是什么"

#### 代码风格不一致
- 新代码应与项目现有代码风格保持一致
- 检查方式：对比同目录下 3-5 个现有文件的风格
- 检查项：
  - 缩进方式（空格数量或 Tab）
  - 命名风格（驼峰、下划线等）
  - 导入/引用顺序
  - 注释风格（单行 vs 多行、位置）
  - 括号风格（同行 vs 换行）
  - 空行使用习惯

---

## Java 规则

### 🔴 必须修复

#### 资源未关闭
- 数据库连接、文件流、网络连接必须正确关闭
- 推荐使用 try-with-resources

#### 空指针风险
- 对可能为 null 的对象调用方法前应判空
- 推荐使用 Optional 或 Objects.requireNonNull

### ⚠️ 建议改进

#### 日志级别
- 生产代码使用 `logger.debug/info/warn/error`
- 避免使用 `System.out.println`

#### 异常处理
- 不要捕获 Exception/Throwable（太宽泛）
- 异常信息应包含上下文

#### 集合操作
- 遍历时删除元素应使用 Iterator
- 优先使用 Stream API 进行集合操作

---

## JavaScript / TypeScript 规则

### 🔴 必须修复

#### 异步错误未处理
- Promise 必须有 `.catch()` 或在 async 函数中使用 try-catch
- 回调函数必须处理 error 参数

#### 类型问题（TypeScript）
- 避免使用 `any` 类型
- 函数返回值应有明确类型

### ⚠️ 建议改进

#### 变量声明
- 使用 `const` / `let`，禁用 `var`
- 优先使用 `const`

#### 比较运算
- 使用 `===` 和 `!==`，避免 `==` 和 `!=`

#### 调试语句
- 删除 `console.log`、`debugger` 语句

#### 箭头函数
- 简单回调优先使用箭头函数
- 注意 `this` 绑定问题

---

## Python 规则

### 🔴 必须修复

#### 异常处理
- 避免裸 `except:` 捕获所有异常
- 应指定具体异常类型

### ⚠️ 建议改进

#### PEP 8 规范
- 函数名使用 snake_case
- 类名使用 PascalCase
- 常量使用 UPPER_CASE

#### 类型注解
- 函数参数和返回值应添加类型注解

#### 导入顺序
- 标准库 → 第三方库 → 本地模块
- 每组之间空一行

---

## 规则扩展

如需添加新规则，请按以下格式追加：

```markdown
#### 规则名称
- 问题描述
- 示例（可选）
```
